<html>
<body>

<script src='bind.js'></script>
<script src='class.js'></script>
<script src='fernu.js'></script>
<script src='core.js'></script>

<input type="file" id="upload" multiple/>

<script>
/*	var x = $.Transfer(
			{
				url:	[
					//'http://www.ya.ru/_core/fernu/transfer/01.json',
					'/_core/fernu/transfer/01.json',
					'/_core/fernu/transfer/02.json',
					'/_core/fernu/transfer/03.json',
					'/_core/fernu/transfer/04.json',
					'/_core/fernu/transfer/05.json',

				],
				timeout: 1000,
				type:	'json',
				onload: function(data) {console.info(data);},
				onerror:function(){alert('ERR!');},
				ontimeout:function(){console.info('timeout');}

			}
	).send();
	var a = $.Transfer(
		{
			url:	[
				//'http://www.ya.ru/_core/fernu/transfer/01.json',
				'/_core/fernu/transfer/01.json',
				'/_core/fernu/transfer/02.json',
				'/_core/fernu/transfer/03.json',
				'/_core/fernu/transfer/04.json',
				'/_core/fernu/transfer/05.json',
				'/_core/fernu/transfer/06.json',
				'/_core/fernu/transfer/07.json',
				'/_core/fernu/transfer/08.json',
				'/_core/fernu/transfer/09.json',
				'/_core/fernu/transfer/10.json'
			],
			timeout: 1000,
			type:	'json',
			onload: function(data) {console.info(data);},
			onerror:function(){alert('ERR!');},
			ontimeout:function(){console.info('timeout');}

		}
	).send();

	var b = $.Transfer(
			{
				url:	[
					//'http://www.ya.ru/_core/fernu/transfer/01.json',

					'/_core/fernu/transfer/06.json',
					'/_core/fernu/transfer/07.json',
					'/_core/fernu/transfer/08.json',
					'/_core/fernu/transfer/09.json',
					'/_core/fernu/transfer/10.json'
				],
				timeout: 1000,
				type:	'json',
				onload: function(data) {console.info(data);},
				onerror:function(){alert('ERR!');},
				ontimeout:function(){console.info('timeout');}

			}
	).send();
	a.abort();*/


	//a.abort();

var x = $.Transfer(
	{
		url:	'/_core/fernu/transfer/01.json',
		type:	'json',
		method: 'post',
		onload: function(data) {console.info(data);}
	}
);

x.send({a:1});
x.send({a:2});
x.send({a:3});

	function uploadFiles(files) {
		var data = {};

		for (var i = 0, file; file = files[i]; ++i) {
			data[file.name] =  file;
		}

		var a = $.Transfer(
			{
				url:	'/',
				data: {a:{b:{c:1}}},
				type:	'json',
				method:	'post',
				onload: function(data) {alert('upload complete');},
				onerror:function(){alert('ERR!');},
				onprogress: function(p){console.info(p + '%');}
			}
		).send();
	}

	document.querySelector('input[type="file"]').addEventListener('change', function(e) {
		uploadFiles(this.files);
	}, false);

</script>

</body>
</html>